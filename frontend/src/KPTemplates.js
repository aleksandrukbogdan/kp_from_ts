// KP Templates - Ð¿Ñ€ÐµÐ´Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½Ñ‹Ðµ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹ ÐšÐ¾Ð¼Ð¼ÐµÑ€Ñ‡ÐµÑÐºÐ¸Ñ… ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹

export const KP_TEMPLATES = {
    standard: {
        id: 'standard',
        name: 'Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹',
        description: 'Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° ÐšÐŸ Ð´Ð»Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð²',
        sections: [
            { id: 'intro', title: 'Ð’Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ', template: '## Ð’Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ\n\nÐ£Ð²Ð°Ð¶Ð°ÐµÐ¼Ñ‹Ð¹ {client_name},\n\nÐ‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð¸Ð¼ Ð·Ð° Ð¸Ð½Ñ‚ÐµÑ€ÐµÑ Ðº Ð½Ð°ÑˆÐµÐ¹ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸. ÐŸÑ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÐ¼ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸ÑŽ ÐºÐ¾Ð¼Ð¼ÐµÑ€Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð° Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°.\n' },
            { id: 'essence', title: 'Ð¡ÑƒÑ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°', template: '## Ð¡ÑƒÑ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n\n{project_essence}\n' },
            { id: 'goals', title: 'Ð‘Ð¸Ð·Ð½ÐµÑ-Ð·Ð°Ð´Ð°Ñ‡Ð¸', template: '## Ð‘Ð¸Ð·Ð½ÐµÑ-Ð·Ð°Ð´Ð°Ñ‡Ð¸\n\n{business_goals}\n' },
            { id: 'features', title: 'ÐšÐ»ÑŽÑ‡ÐµÐ²Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»', template: '## ÐšÐ»ÑŽÑ‡ÐµÐ²Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»\n\n{key_features}\n' },
            { id: 'tech', title: 'Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸', template: '## Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÑ‚ÐµÐº\n\n{tech_stack}\n' },
            { id: 'stages', title: 'Ð­Ñ‚Ð°Ð¿Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚', template: '## Ð­Ñ‚Ð°Ð¿Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚\n\n{stages_table}\n' },
            { id: 'budget', title: 'Ð¡Ð¼ÐµÑ‚Ð°', template: '## Ð‘ÑŽÐ´Ð¶ÐµÑ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n\n**Ð˜Ñ‚Ð¾Ð³Ð¾: {total_budget} â‚½**\n\n{budget_table}\n' },
            { id: 'terms', title: 'Ð£ÑÐ»Ð¾Ð²Ð¸Ñ', template: '## Ð£ÑÐ»Ð¾Ð²Ð¸Ñ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ñ‡ÐµÑÑ‚Ð²Ð°\n\n- Ð¡Ñ€Ð¾Ðº Ð½Ð°Ñ‡Ð°Ð»Ð° Ñ€Ð°Ð±Ð¾Ñ‚: Ð¿Ð¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð°\n- Ð¤Ð¾Ñ€Ð¼Ð° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹: Ð¿Ð¾ÑÑ‚Ð°Ð¿Ð½Ð°Ñ\n- Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ð¹Ð½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°: 3 Ð¼ÐµÑÑÑ†Ð°\n' },
        ]
    },

    detailed: {
        id: 'detailed',
        name: 'Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹',
        description: 'Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ñ Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼Ð¸ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ð¾ÑÑ‚ÑÐ¼Ð¸',
        sections: [
            { id: 'cover', title: 'Ð¢Ð¸Ñ‚ÑƒÐ»ÑŒÐ½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð°', template: '# ÐšÐ¾Ð¼Ð¼ÐµÑ€Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ\n\n**Ð”Ð»Ñ:** {client_name}\n\n**ÐŸÑ€Ð¾ÐµÐºÑ‚:** {project_type}\n\n**Ð”Ð°Ñ‚Ð°:** {date}\n\n---\n' },
            { id: 'summary', title: 'Ð ÐµÐ·ÑŽÐ¼Ðµ', template: '## ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ñ€ÐµÐ·ÑŽÐ¼Ðµ\n\n{project_essence}\n\n**Ð¡Ñ€Ð¾Ðº Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸:** {timeline}\n**Ð‘ÑŽÐ´Ð¶ÐµÑ‚:** {total_budget} â‚½\n' },
            { id: 'analysis', title: 'ÐÐ½Ð°Ð»Ð¸Ð· Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹', template: '## ÐÐ½Ð°Ð»Ð¸Ð· Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹\n\n### Ð‘Ð¸Ð·Ð½ÐµÑ-Ñ†ÐµÐ»Ð¸\n{business_goals}\n\n### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ\n{key_features}\n' },
            { id: 'architecture', title: 'ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°', template: '## Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°\n\n### Ð¡Ñ‚ÐµÐº Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¹\n{tech_stack}\n\n### Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸\n{integrations}\n' },
            { id: 'roadmap', title: 'Ð”Ð¾Ñ€Ð¾Ð¶Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð°', template: '## Ð”Ð¾Ñ€Ð¾Ð¶Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n\n{stages_table}\n\n### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð²ÐµÑ…Ð¸\n- [ ] ÐŸÑ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿\n- [ ] MVP\n- [ ] Ð ÐµÐ»Ð¸Ð·\n' },
            { id: 'team', title: 'ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°', template: '## Ð¡Ð¾ÑÑ‚Ð°Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹\n\n{team_table}\n' },
            { id: 'budget_detail', title: 'Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐ¼ÐµÑ‚Ð°', template: '## Ð”ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð°\n\n{budget_table}\n\n**Ð˜Ñ‚Ð¾Ð³Ð¾:** {total_budget} â‚½\n' },
            { id: 'risks', title: 'Ð Ð¸ÑÐºÐ¸', template: '## Ð Ð¸ÑÐºÐ¸ Ð¸ Ð´Ð¾Ð¿ÑƒÑ‰ÐµÐ½Ð¸Ñ\n\n| Ð Ð¸ÑÐº | Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ | Ð’Ð»Ð¸ÑÐ½Ð¸Ðµ | ÐœÐ¸Ñ‚Ð¸Ð³Ð°Ñ†Ð¸Ñ |\n|------|-------------|---------|----------|\n| Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ | Ð¡Ñ€ÐµÐ´Ð½ÑÑ | Ð’Ñ‹ÑÐ¾ÐºÐ¾Ðµ | Agile Ð¿Ð¾Ð´Ñ…Ð¾Ð´ |\n| Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ | ÐÐ¸Ð·ÐºÐ°Ñ | Ð¡Ñ€ÐµÐ´Ð½ÐµÐµ | Ð ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ |\n' },
            { id: 'terms', title: 'Ð£ÑÐ»Ð¾Ð²Ð¸Ñ', template: '## Ð£ÑÐ»Ð¾Ð²Ð¸Ñ Ð¸ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ð¸\n\n### ÐžÐ¿Ð»Ð°Ñ‚Ð°\n- 30% Ð¿Ñ€ÐµÐ´Ð¾Ð¿Ð»Ð°Ñ‚Ð°\n- 40% Ð¿Ð¾ÑÐ»Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿Ð°\n- 30% Ð¿Ð¾ÑÐ»Ðµ ÑÐ´Ð°Ñ‡Ð¸\n\n### Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ð¸\n- Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ð¹Ð½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°: 6 Ð¼ÐµÑÑÑ†ÐµÐ²\n- SLA Ñ€ÐµÐ°Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ: 24 Ñ‡Ð°ÑÐ°\n' },
        ]
    },

    presentation: {
        id: 'presentation',
        name: 'ÐŸÑ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹',
        description: 'ÐšÑ€Ð°Ñ‚ÐºÐ¸Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð»ÐµÐ½Ð¸Ñ',
        sections: [
            { id: 'hero', title: 'Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº', template: '# {project_type}\n\n> {project_essence}\n\n---\n' },
            { id: 'value', title: 'Ð¦ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ', template: '## Ð§Ñ‚Ð¾ Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ\n\n{key_features}\n' },
            { id: 'how', title: 'ÐšÐ°Ðº Ð¼Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼', template: '## ÐÐ°Ñˆ Ð¿Ð¾Ð´Ñ…Ð¾Ð´\n\n1. **ÐÐ½Ð°Ð»Ð¸Ð·** â€” Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹\n2. **ÐŸÑ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿** â€” Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ\n3. **Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°** â€” Ð¸Ñ‚ÐµÑ€Ð°Ñ‚Ð¸Ð²Ð½Ð°Ñ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ\n4. **Ð—Ð°Ð¿ÑƒÑÐº** â€” Ð²Ð½ÐµÐ´Ñ€ÐµÐ½Ð¸Ðµ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°\n' },
            { id: 'price', title: 'Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ', template: '## Ð˜Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¸\n\n### {total_budget} â‚½\n\n*Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ, Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð·Ð°Ð¿ÑƒÑÐº*\n' },
            { id: 'cta', title: 'ÐŸÑ€Ð¸Ð·Ñ‹Ð²', template: '## Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸\n\nðŸ“ž Ð¡Ð²ÑÐ¶Ð¸Ñ‚ÐµÑÑŒ Ñ Ð½Ð°Ð¼Ð¸ Ð´Ð»Ñ Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹\n\nâœ‰ï¸ email@company.ru\n' },
        ]
    }
};

// Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° Ð¸Ð· ÑˆÐ°Ð±Ð»Ð¾Ð½Ð°
export const generateFromTemplate = (templateId, data) => {
    const template = KP_TEMPLATES[templateId];
    if (!template) return '';

    let content = '';

    template.sections.forEach(section => {
        let sectionContent = section.template;

        // Ð—Ð°Ð¼ÐµÐ½Ð° Ð¿Ð»ÐµÐ¹ÑÑ…Ð¾Ð»Ð´ÐµÑ€Ð¾Ð² Ð½Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
        Object.entries(data).forEach(([key, value]) => {
            const placeholder = `{${key}}`;
            if (typeof value === 'string') {
                sectionContent = sectionContent.replace(new RegExp(placeholder, 'g'), value);
            } else if (Array.isArray(value)) {
                sectionContent = sectionContent.replace(new RegExp(placeholder, 'g'), value.map(v => `- ${v}`).join('\n'));
            }
        });

        content += sectionContent + '\n';
    });

    return content;
};

// ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÐºÑ†Ð¸Ð¹ Ð´Ð»Ñ drag-and-drop
export const getSectionsFromTemplate = (templateId) => {
    const template = KP_TEMPLATES[templateId];
    return template ? [...template.sections] : [];
};

export default KP_TEMPLATES;
